<div data-section-id="{{ section.id }}" data-section-type="cart">
  <div class="layout-content-wrapper">
    <div class="container">
      <div style="max-width: 560px; margin: 0 auto;">

        {% if cart.item_count > 0 %}

          <form action="/cart" method="post" novalidate data-cart-form>

            <div class="cart-list">
              <div class="cart-list__header">
                <div class="cart-list__col-product">{{ 'cart.label.product' | t }}</div>
                <div class="cart-list__col-subtotal">{{ 'cart.general.subtotal' | t }}</div>
              </div>
              <div class="cart-list__body">
                {% for item in cart.items %}
                  <div class="cart-list__row">
                    <div class="cart-list__col-product">
                      <img src="{{ item | img_url: '200x' }}" class="cart-list__item-image" alt="{{ item.title | escape }}">
                      <div class="cart-list__item-details">
                        <div class="cart-list__item-details-title">
                          <a href="{{ item.url }}">{{ item.product.title }}</a>
                        </div>

                        <ul class="list-unstyled">

                          {% for option in item.product.options %}
                            {% assign option_key = 'option' | append: forloop.index %}
                            {% assign option_val = item.variant[option_key] %}
                            {% unless option == "Title" and option_val == "Default Title" %}
                              <li>{{ option }}: {{ option_val }}</li>
                            {% endunless %}
                          {% endfor %}

                          {% unless item.properties == empty %}
                            {% for p in item.properties %}
                              {% unless p.last == blank %}
                              <li>
                                {{ p.first }}:
                                {% if p.last contains '/uploads/' %}
                                  <a href="{{ p.last }}">{{ p.last | split: '/' | last }}</a>
                                {% else %}
                                  {{ p.last }}
                                {% endif %}
                              </li>
                              {% endunless %}
                            {% endfor %}
                          {% endunless %}
                          <li>Qty: {{ item.quantity }}</li>
                          <li class="visible-xs">{{ item.line_price | money }}</li>
                          <li>
                            <a href="/cart/change?line={{ forloop.index }}&amp;quantity=0" class="secondary-link">â†’ Remove</a>
                          </li>
                        </ul>

                        <a href="/cart/change?line={{ forloop.index }}&amp;quantity=0" class="cart-list__item-details-remove">
                          {% include 'icon-close' %}
                        </a>
                      </div>
                    </div>            
                    <div class="cart-list__col-subtotal">{{ item.line_price | money }}</div>
                  </div>
                {% endfor %}
              </div>
              <div class="cart-list__footer">

                <div class="cart-list__footer-row">
                  <p class="clearfix u-fw-bold">
                    <span style="float: left;">{{ 'cart.general.subtotal' | t }}</span>
                    <span style="float: right">{{ cart.total_price | money }}</span>
                  </p>
                  {% if cart.total_discounts > 0 %}
                    <p>{{ 'cart.general.savings' | t }} {{ cart.total_discounts | money }}</p>
                  {% endif %}
                  <p>
                    <input type="submit" name="checkout" class="btn btn-primary btn-block" value="{{ 'cart.general.checkout' | t }}">
                  </p>
                  {% if additional_checkout_buttons %}
                    <div class="additional-checkout-buttons">
                      {{ content_for_additional_checkout_buttons }}
                    </div>
                  {% endif %}
                  {% if section.settings.message != blank %}
                    <div class="u-fs-small u-ta-center">
                      {{ section.settings.message }}
                    </div>
                  {% endif %}                  
                  {% comment %}<p class="u-fs-small u-ta-center">{{ 'cart.general.shipping_at_checkout' | t }}</p>                  {% endcomment %}
                </div>
              </div>
            </div>

          </form>

          <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="verifyCartModalLabel" data-verify-modal>
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <a href="#" class="close" data-dismiss="modal" aria-label="Close">{% include 'icon-close' %}</a>
                  <div class="modal-title" id="verifyCartModalLabel">Verify Cart</div>
                </div>
                <div class="modal-body">
                  <p class="u-ta-center u-fs-small">Please verify cart contents before proceeding to checkout</p>                  
                  <ul class="list-unstyled">
                    {% for item in cart.items %}
                      <li>{{ item.product.title }}</li>
                    {% endfor %}
                  </ul>
                </div>
                <div class="modal-footer">
                  <form data-verify-form>
                    <p>Total: <strong>{{ cart.total_price | money }}</strong></p>
                    <button type="submit" class="btn">Proceed to Checkout</button>
                  </form>
                </div>
              </div>
            </div>
          </div>

        {% else %}

          {% comment %}
          Cart empty state
          {% endcomment %}
          <div class="supports-cookies u-ta-center">
            <p>{{ 'cart.general.empty' | t }}</p>
            <p>{{ 'cart.general.continue_browsing_html' | t }}</p>
          </div>

          {% comment %}
          Cart no cookies state
          ---------------------
          Browser cookies are required to use the cart. If cookies aren't enabled in the
          browser a message is displayed prompting the user to enable them.
          {% endcomment %}
          <div class="supports-no-cookies u-ta-center">
            <p>{{ 'cart.general.cookies_required' | t }}</p>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>

{% schema %}
  {
    "name": "Cart",
    "settings": [
      {
        "type": "richtext",
        "id": "message",
        "label": "Cart Message"
      }
    ]
  }
{% endschema %}