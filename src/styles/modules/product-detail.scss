// --------------------------------------------------------
// Product Detail
// --------------------------------------------------------

$product-essential-width-small: 340px;
$product-essential-width:       520px;
$product-elements-gutter-small: 60px;
$product-elements-gutter:       100px;
$product-image-fade-transition: opacity 3000ms cubic-bezier(0.63, 0.16, 0.17, 1.02) 500ms;
$product-image-fade-transition-fast: opacity 500ms cubic-bezier(0.63, 0.16, 0.17, 1.02);


// @TODO - These are temp styles
body.template-product .layout-content-wrapper {
  @media (min-width: $screen-md-min) {
    margin-top: 0;
  }

  @media (max-width: $screen-sm-max) {
    margin-bottom: 250px;
  }
}

// Essential
// --------------------------------------------------------

.product-essential {

  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: $color-white;
  padding: $grid-gutter-width/2;
  border-top: 1px solid black;
  text-align: center;

  button[type="submit"] {
    width: 100%;
    // min-width: 300px;
    // max-width: 100%;
  }


  @media (min-width: $screen-sm-min) {
    width: $product-essential-width-small;
    position: fixed;
    top: 50%;
    right: $grid-gutter-width/2;
    left: auto;
    bottom: auto;
    transform: translateY(-50%);
    padding: 0;
    padding-left: $product-elements-gutter-small;
    padding-right: $product-elements-gutter-small/2;
    text-align: left;
    background-color: transparent;
    border-top: none;

    button[type="submit"] {
      width: 100%;
      min-width: 0;
    }
 
  }

  @media (min-width: $screen-lg-min) {
    width: $product-essential-width;
    padding-left: $product-elements-gutter;
    padding-right: $product-elements-gutter/2;
  }
}

// Gallery
// --------------------------------------------------------

// Scroll Gallery
.product-gallery {
  @include display-flex;
  @include align-items(center);
  @include justify-content(center);
  margin: 0 $grid-gutter-width/2;

  @media (min-width: $screen-sm-min) {
    min-height: calc(100vh - 200px);
    max-width: 100%;
    width: calc(100% - #{ $product-essential-width-small + $grid-gutter-width + $menu-clearance-min });
    margin: 0 auto 0 $menu-clearance-min;    
  }

  @media (min-width: $screen-lg-min) {
    width: calc(100% - #{ $product-essential-width + $grid-gutter-width + $menu-clearance-max });
    margin-left: $menu-clearance-max;
  }

  html.js & {
    opacity: 0;

    &.is-ready {
      opacity: 1;
      @include transition($product-image-fade-transition);
    }
  }  
}

.product-gallery__list {
  @include list-unstyled;
  margin: 0 auto;
  max-width: 400px;

  @media (min-width: $screen-sm-min) {
    margin: 0;
    max-width: none;
  }
}

.product-gallery__item {
  position: relative;
  margin-bottom: 0;
  @include display-flex;
  @include align-items(center);
  min-height: 50vh;

  @media (min-width: $screen-sm-min) {
    min-height: 65vh;  
  }

  @media (min-width: $screen-lg-min) {
    min-height: 100vh;
  }

  &:last-child:not(:only-child) {
    min-height: auto;
  }

  & + & {
    margin-top: $grid-gutter-width/2;
  }
}

.product-gallery__image {
  @include align-self(center);
  display: block;
  margin: 0 auto;
  width: 100%;
  object-fit: contain;

  @media (min-width: $screen-lg-min) {
    max-width: 900px;  
  }
  
  // Lazy loaded
  &[data-src] {
    opacity: 0;
  }

  &.is-loaded {
    opacity: 1;
    @include transition($product-image-fade-transition-fast);
    // @include transition(opacity $transition-duration-slow $transition-timing-function-in);
  }

}
